{"ast":null,"code":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineExtension(\"annotateScrollbar\", function (options) {\n    if (typeof options == \"string\") options = {\n      className: options\n    };\n    return new Annotation(this, options);\n  });\n  CodeMirror.defineOption(\"scrollButtonHeight\", 0);\n\n  function Annotation(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.buttonHeight = options.scrollButtonHeight || cm.getOption(\"scrollButtonHeight\");\n    this.annotations = [];\n    this.doRedraw = this.doUpdate = null;\n    this.div = cm.getWrapperElement().appendChild(document.createElement(\"div\"));\n    this.div.style.cssText = \"position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none\";\n    this.computeScale();\n\n    function scheduleRedraw(delay) {\n      clearTimeout(self.doRedraw);\n      self.doRedraw = setTimeout(function () {\n        self.redraw();\n      }, delay);\n    }\n\n    var self = this;\n    cm.on(\"refresh\", this.resizeHandler = function () {\n      clearTimeout(self.doUpdate);\n      self.doUpdate = setTimeout(function () {\n        if (self.computeScale()) scheduleRedraw(20);\n      }, 100);\n    });\n    cm.on(\"markerAdded\", this.resizeHandler);\n    cm.on(\"markerCleared\", this.resizeHandler);\n    if (options.listenForChanges !== false) cm.on(\"changes\", this.changeHandler = function () {\n      scheduleRedraw(250);\n    });\n  }\n\n  Annotation.prototype.computeScale = function () {\n    var cm = this.cm;\n    var hScale = (cm.getWrapperElement().clientHeight - cm.display.barHeight - this.buttonHeight * 2) / cm.getScrollerElement().scrollHeight;\n\n    if (hScale != this.hScale) {\n      this.hScale = hScale;\n      return true;\n    }\n  };\n\n  Annotation.prototype.update = function (annotations) {\n    this.annotations = annotations;\n    this.redraw();\n  };\n\n  Annotation.prototype.redraw = function (compute) {\n    if (compute !== false) this.computeScale();\n    var cm = this.cm,\n        hScale = this.hScale;\n    var frag = document.createDocumentFragment(),\n        anns = this.annotations;\n    var wrapping = cm.getOption(\"lineWrapping\");\n    var singleLineH = wrapping && cm.defaultTextHeight() * 1.5;\n    var curLine = null,\n        curLineObj = null;\n\n    function getY(pos, top) {\n      if (curLine != pos.line) {\n        curLine = pos.line;\n        curLineObj = cm.getLineHandle(pos.line);\n        var visual = cm.getLineHandleVisualStart(curLineObj);\n\n        if (visual != curLineObj) {\n          curLine = cm.getLineNumber(visual);\n          curLineObj = visual;\n        }\n      }\n\n      if (curLineObj.widgets && curLineObj.widgets.length || wrapping && curLineObj.height > singleLineH) return cm.charCoords(pos, \"local\")[top ? \"top\" : \"bottom\"];\n      var topY = cm.heightAtLine(curLineObj, \"local\");\n      return topY + (top ? 0 : curLineObj.height);\n    }\n\n    var lastLine = cm.lastLine();\n    if (cm.display.barWidth) for (var i = 0, nextTop; i < anns.length; i++) {\n      var ann = anns[i];\n      if (ann.to.line > lastLine) continue;\n      var top = nextTop || getY(ann.from, true) * hScale;\n      var bottom = getY(ann.to, false) * hScale;\n\n      while (i < anns.length - 1) {\n        if (anns[i + 1].to.line > lastLine) break;\n        nextTop = getY(anns[i + 1].from, true) * hScale;\n        if (nextTop > bottom + .9) break;\n        ann = anns[++i];\n        bottom = getY(ann.to, false) * hScale;\n      }\n\n      if (bottom == top) continue;\n      var height = Math.max(bottom - top, 3);\n      var elt = frag.appendChild(document.createElement(\"div\"));\n      elt.style.cssText = \"position: absolute; right: 0px; width: \" + Math.max(cm.display.barWidth - 1, 2) + \"px; top: \" + (top + this.buttonHeight) + \"px; height: \" + height + \"px\";\n      elt.className = this.options.className;\n\n      if (ann.id) {\n        elt.setAttribute(\"annotation-id\", ann.id);\n      }\n    }\n    this.div.textContent = \"\";\n    this.div.appendChild(frag);\n  };\n\n  Annotation.prototype.clear = function () {\n    this.cm.off(\"refresh\", this.resizeHandler);\n    this.cm.off(\"markerAdded\", this.resizeHandler);\n    this.cm.off(\"markerCleared\", this.resizeHandler);\n    if (this.changeHandler) this.cm.off(\"changes\", this.changeHandler);\n    this.div.parentNode.removeChild(this.div);\n  };\n});","map":{"version":3,"sources":["/Users/jevlopez/Documents/React-CodePen-Clone/node_modules/codemirror/addon/scroll/annotatescrollbar.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","defineExtension","options","className","Annotation","defineOption","cm","buttonHeight","scrollButtonHeight","getOption","annotations","doRedraw","doUpdate","div","getWrapperElement","appendChild","document","createElement","style","cssText","computeScale","scheduleRedraw","delay","clearTimeout","self","setTimeout","redraw","on","resizeHandler","listenForChanges","changeHandler","prototype","hScale","clientHeight","display","barHeight","getScrollerElement","scrollHeight","update","compute","frag","createDocumentFragment","anns","wrapping","singleLineH","defaultTextHeight","curLine","curLineObj","getY","pos","top","line","getLineHandle","visual","getLineHandleVisualStart","getLineNumber","widgets","length","height","charCoords","topY","heightAtLine","lastLine","barWidth","i","nextTop","ann","to","from","bottom","Math","max","elt","id","setAttribute","textContent","clear","off","parentNode","removeChild"],"mappings":"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","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineExtension(\"annotateScrollbar\", function(options) {\n    if (typeof options == \"string\") options = {className: options};\n    return new Annotation(this, options);\n  });\n\n  CodeMirror.defineOption(\"scrollButtonHeight\", 0);\n\n  function Annotation(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.buttonHeight = options.scrollButtonHeight || cm.getOption(\"scrollButtonHeight\");\n    this.annotations = [];\n    this.doRedraw = this.doUpdate = null;\n    this.div = cm.getWrapperElement().appendChild(document.createElement(\"div\"));\n    this.div.style.cssText = \"position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none\";\n    this.computeScale();\n\n    function scheduleRedraw(delay) {\n      clearTimeout(self.doRedraw);\n      self.doRedraw = setTimeout(function() { self.redraw(); }, delay);\n    }\n\n    var self = this;\n    cm.on(\"refresh\", this.resizeHandler = function() {\n      clearTimeout(self.doUpdate);\n      self.doUpdate = setTimeout(function() {\n        if (self.computeScale()) scheduleRedraw(20);\n      }, 100);\n    });\n    cm.on(\"markerAdded\", this.resizeHandler);\n    cm.on(\"markerCleared\", this.resizeHandler);\n    if (options.listenForChanges !== false)\n      cm.on(\"changes\", this.changeHandler = function() {\n        scheduleRedraw(250);\n      });\n  }\n\n  Annotation.prototype.computeScale = function() {\n    var cm = this.cm;\n    var hScale = (cm.getWrapperElement().clientHeight - cm.display.barHeight - this.buttonHeight * 2) /\n      cm.getScrollerElement().scrollHeight\n    if (hScale != this.hScale) {\n      this.hScale = hScale;\n      return true;\n    }\n  };\n\n  Annotation.prototype.update = function(annotations) {\n    this.annotations = annotations;\n    this.redraw();\n  };\n\n  Annotation.prototype.redraw = function(compute) {\n    if (compute !== false) this.computeScale();\n    var cm = this.cm, hScale = this.hScale;\n\n    var frag = document.createDocumentFragment(), anns = this.annotations;\n\n    var wrapping = cm.getOption(\"lineWrapping\");\n    var singleLineH = wrapping && cm.defaultTextHeight() * 1.5;\n    var curLine = null, curLineObj = null;\n\n    function getY(pos, top) {\n      if (curLine != pos.line) {\n        curLine = pos.line\n        curLineObj = cm.getLineHandle(pos.line)\n        var visual = cm.getLineHandleVisualStart(curLineObj)\n        if (visual != curLineObj) {\n          curLine = cm.getLineNumber(visual)\n          curLineObj = visual\n        }\n      }\n      if ((curLineObj.widgets && curLineObj.widgets.length) ||\n          (wrapping && curLineObj.height > singleLineH))\n        return cm.charCoords(pos, \"local\")[top ? \"top\" : \"bottom\"];\n      var topY = cm.heightAtLine(curLineObj, \"local\");\n      return topY + (top ? 0 : curLineObj.height);\n    }\n\n    var lastLine = cm.lastLine()\n    if (cm.display.barWidth) for (var i = 0, nextTop; i < anns.length; i++) {\n      var ann = anns[i];\n      if (ann.to.line > lastLine) continue;\n      var top = nextTop || getY(ann.from, true) * hScale;\n      var bottom = getY(ann.to, false) * hScale;\n      while (i < anns.length - 1) {\n        if (anns[i + 1].to.line > lastLine) break;\n        nextTop = getY(anns[i + 1].from, true) * hScale;\n        if (nextTop > bottom + .9) break;\n        ann = anns[++i];\n        bottom = getY(ann.to, false) * hScale;\n      }\n      if (bottom == top) continue;\n      var height = Math.max(bottom - top, 3);\n\n      var elt = frag.appendChild(document.createElement(\"div\"));\n      elt.style.cssText = \"position: absolute; right: 0px; width: \" + Math.max(cm.display.barWidth - 1, 2) + \"px; top: \"\n        + (top + this.buttonHeight) + \"px; height: \" + height + \"px\";\n      elt.className = this.options.className;\n      if (ann.id) {\n        elt.setAttribute(\"annotation-id\", ann.id);\n      }\n    }\n    this.div.textContent = \"\";\n    this.div.appendChild(frag);\n  };\n\n  Annotation.prototype.clear = function() {\n    this.cm.off(\"refresh\", this.resizeHandler);\n    this.cm.off(\"markerAdded\", this.resizeHandler);\n    this.cm.off(\"markerCleared\", this.resizeHandler);\n    if (this.changeHandler) this.cm.off(\"changes\", this.changeHandler);\n    this.div.parentNode.removeChild(this.div);\n  };\n});\n"]},"metadata":{},"sourceType":"script"}